(()=>{var e={6486:(e,t,n)=>{var r,o;void 0===(o="function"==typeof(r=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(e):t}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}var f=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0,o=n.length;r<o;r++)if(n[r].callback===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,r=t.length;n<r;n++){var o=t[n];try{o.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),t}(),p=function(t){o(i,t);var n=u(i);function i(){var t;return e(this,i),(t=n.call(this)).listeners||f.call(a(t)),Object.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return r(i,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),l(s(i.prototype),"dispatchEvent",this).call(this,e)}}]),i}(f),h=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new p,writable:!0,configurable:!0})}return r(t,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(h.prototype[Symbol.toStringTag]="AbortController",p.prototype[Symbol.toStringTag]="AbortSignal"),function(e){(function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController})(e)&&(e.AbortController=h,e.AbortSignal=p)}("undefined"!=typeof self?self:n.g)})?r.call(t,n,t,e):r)||(e.exports=o)},3099:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},1223:(e,t,n)=>{var r=n(5112),o=n(30),s=n(3070),i=r("unscopables"),a=Array.prototype;null==a[i]&&s.f(a,i,{configurable:!0,value:o(null)}),e.exports=function(e){a[i][e]=!0}},9670:(e,t,n)=>{var r=n(111);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},1318:(e,t,n)=>{var r=n(5656),o=n(7466),s=n(1400),i=function(e){return function(t,n,i){var a,c=r(t),u=o(c.length),l=s(i,u);if(e&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},5417:(e,t,n)=>{var r=n(111),o=n(3157),s=n(5112)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[s])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},4326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9920:(e,t,n)=>{var r=n(6656),o=n(3887),s=n(1236),i=n(3070);e.exports=function(e,t){for(var n=o(t),a=i.f,c=s.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||a(e,l,c(t,l))}}},8880:(e,t,n)=>{var r=n(9781),o=n(3070),s=n(9114);e.exports=r?function(e,t,n){return o.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9781:(e,t,n)=>{var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,n)=>{var r=n(7854),o=n(111),s=r.document,i=o(s)&&o(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,n)=>{var r=n(7854),o=n(1236).f,s=n(8880),i=n(1320),a=n(3505),c=n(9920),u=n(4705);e.exports=function(e,t){var n,l,f,p,h,d=e.target,g=e.global,y=e.stat;if(n=g?r:y?r[d]||a(d,{}):(r[d]||{}).prototype)for(l in t){if(p=t[l],f=e.noTargetGet?(h=o(n,l))&&h.value:n[l],!u(g?l:d+(y?".":"#")+l,e.forced)&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(e.sham||f&&f.sham)&&s(p,"sham",!0),i(n,l,p,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},6790:(e,t,n)=>{"use strict";var r=n(3157),o=n(7466),s=n(9974),i=function(e,t,n,a,c,u,l,f){for(var p,h=c,d=0,g=!!l&&s(l,f,3);d<a;){if(d in n){if(p=g?g(n[d],d,t):n[d],u>0&&r(p))h=i(e,t,p,o(p.length),h,u-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[h]=p}h++}d++}return h};e.exports=i},9974:(e,t,n)=>{var r=n(3099);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},5005:(e,t,n)=>{var r=n(857),o=n(7854),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(r[e])||s(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},7854:(e,t,n)=>{var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},3501:e=>{e.exports={}},490:(e,t,n)=>{var r=n(5005);e.exports=r("document","documentElement")},4664:(e,t,n)=>{var r=n(9781),o=n(7293),s=n(317);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,n)=>{var r=n(7293),o=n(4326),s="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?s.call(e,""):Object(e)}:Object},2788:(e,t,n)=>{var r=n(5465),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},9909:(e,t,n)=>{var r,o,s,i=n(8536),a=n(7854),c=n(111),u=n(8880),l=n(6656),f=n(5465),p=n(6200),h=n(3501),d=a.WeakMap;if(i){var g=f.state||(f.state=new d),y=g.get,m=g.has,b=g.set;r=function(e,t){return t.facade=e,b.call(g,e,t),t},o=function(e){return y.call(g,e)||{}},s=function(e){return m.call(g,e)}}else{var w=p("state");h[w]=!0,r=function(e,t){return t.facade=e,u(e,w,t),t},o=function(e){return l(e,w)?e[w]:{}},s=function(e){return l(e,w)}}e.exports={set:r,get:o,has:s,enforce:function(e){return s(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},3157:(e,t,n)=>{var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4705:(e,t,n)=>{var r=n(7293),o=/#|\.prototype\./,s=function(e,t){var n=a[i(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},i=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},111:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:e=>{e.exports=!1},133:(e,t,n)=>{var r=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},8536:(e,t,n)=>{var r=n(7854),o=n(2788),s=r.WeakMap;e.exports="function"==typeof s&&/native code/.test(o(s))},30:(e,t,n)=>{var r,o=n(9670),s=n(6048),i=n(748),a=n(3501),c=n(490),u=n(317),l=n(6200)("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=i.length;n--;)delete h.prototype[i[n]];return h()};a[l]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=o(e),n=new f,f.prototype=null,n[l]=e):n=h(),void 0===t?n:s(n,t)}},6048:(e,t,n)=>{var r=n(9781),o=n(3070),s=n(9670),i=n(1956);e.exports=r?Object.defineProperties:function(e,t){s(e);for(var n,r=i(t),a=r.length,c=0;a>c;)o.f(e,n=r[c++],t[n]);return e}},3070:(e,t,n)=>{var r=n(9781),o=n(4664),s=n(9670),i=n(7593),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(s(e),t=i(t,!0),s(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:(e,t,n)=>{var r=n(9781),o=n(5296),s=n(9114),i=n(5656),a=n(7593),c=n(6656),u=n(4664),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=i(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return s(!o.f.call(e,t),e[t])}},8006:(e,t,n)=>{var r=n(6324),o=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},6324:(e,t,n)=>{var r=n(6656),o=n(5656),s=n(1318).indexOf,i=n(3501);e.exports=function(e,t){var n,a=o(e),c=0,u=[];for(n in a)!r(i,n)&&r(a,n)&&u.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~s(u,n)||u.push(n));return u}},1956:(e,t,n)=>{var r=n(6324),o=n(748);e.exports=Object.keys||function(e){return r(e,o)}},5296:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},3887:(e,t,n)=>{var r=n(5005),o=n(8006),s=n(5181),i=n(9670);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(i(e)),n=s.f;return n?t.concat(n(e)):t}},857:(e,t,n)=>{var r=n(7854);e.exports=r},1320:(e,t,n)=>{var r=n(7854),o=n(8880),s=n(6656),i=n(3505),a=n(2788),c=n(9909),u=c.get,l=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,a){var c,u=!!a&&!!a.unsafe,p=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||s(n,"name")||o(n,"name",t),(c=l(n)).source||(c.source=f.join("string"==typeof t?t:""))),e!==r?(u?!h&&e[t]&&(p=!0):delete e[t],p?e[t]=n:o(e,t,n)):p?e[t]=n:i(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},4488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:(e,t,n)=>{var r=n(7854),o=n(8880);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},6200:(e,t,n)=>{var r=n(2309),o=n(9711),s=r("keys");e.exports=function(e){return s[e]||(s[e]=o(e))}},5465:(e,t,n)=>{var r=n(7854),o=n(3505),s="__core-js_shared__",i=r[s]||o(s,{});e.exports=i},2309:(e,t,n)=>{var r=n(1913),o=n(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.3",mode:r?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},1400:(e,t,n)=>{var r=n(9958),o=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):s(n,t)}},5656:(e,t,n)=>{var r=n(8361),o=n(4488);e.exports=function(e){return r(o(e))}},9958:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},7466:(e,t,n)=>{var r=n(9958),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},7908:(e,t,n)=>{var r=n(4488);e.exports=function(e){return Object(r(e))}},7593:(e,t,n)=>{var r=n(111);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},9711:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},3307:(e,t,n)=>{var r=n(133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(e,t,n)=>{var r=n(7854),o=n(2309),s=n(6656),i=n(9711),a=n(133),c=n(3307),u=o("wks"),l=r.Symbol,f=c?l:l&&l.withoutSetter||i;e.exports=function(e){return s(u,e)||(a&&s(l,e)?u[e]=l[e]:u[e]=f("Symbol."+e)),u[e]}},4944:(e,t,n)=>{"use strict";var r=n(2109),o=n(6790),s=n(7908),i=n(7466),a=n(9958),c=n(5417);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=s(this),n=i(t.length),r=c(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:a(e)),r}})},3792:(e,t,n)=>{n(1223)("flat")},4098:function(e,t){var n=function(e){function t(){this.fetch=!1,this.DOMException=e.DOMException}return t.prototype=e,new t}("undefined"!=typeof self?self:this);!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,i="ArrayBuffer"in e;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=d(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=l(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){var n,r,o=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),b.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function C(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},m.call(w.prototype),m.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:0,statusText:""});return e.type="error",e};var $=[301,302,303,307,308];C.redirect=function(e,t){if(-1===$.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,n){return new Promise((function(r,s){var i=new w(e,n);if(i.signal&&i.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new C(o,n))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),i.signal&&(i.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",c)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=p,e.Request=w,e.Response=C),t.Headers=p,t.Request=w,t.Response=C,t.fetch=x}({})}(n),delete n.fetch.polyfill,(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t},9435:e=>{var t=1e3,n=60*t,r=60*n,o=24*r;function s(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,i){i=i||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===u&&isFinite(e))return i.long?(a=e,(c=Math.abs(a))>=o?s(a,c,o,"day"):c>=r?s(a,c,r,"hour"):c>=n?s(a,c,n,"minute"):c>=t?s(a,c,t,"second"):a+" ms"):function(e){var s=Math.abs(e);return s>=o?Math.round(e/o)+"d":s>=r?Math.round(e/r)+"h":s>=n?Math.round(e/n)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,o=null;function s(...e){if(!s.enabled)return;const r=s,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";a++;const s=t.formatters[o];if("function"==typeof s){const t=e[a];n=s.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?t.enabled(e):o,set:e=>{o=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(9435),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},5014:(e,t,n)=>{"use strict";n(4944),n(3792),Object.defineProperty(t,"__esModule",{value:!0});const r=n(2681),o=n(2067),s=n(9912),{Response:i}="undefined"!=typeof FHIRCLIENT_PURE?window:n(4098),a=r.debug.extend("client");function c(e,t,n,o,s){let i=r.makeArray(t.resolveReferences).filter(Boolean).map((e=>String(e).trim())).filter(Boolean);if(i=i.filter(((e,t)=>!(i.indexOf(e,t+1)>-1&&(a('Duplicated reference path "%s"',e),1)))),!i.length)return Promise.resolve();const c={};i.forEach((e=>{const t=e.split(".").length;c[t]||(c[t]=[]),c[t].push(e)}));let u=Promise.resolve();return Object.keys(c).sort().forEach((i=>{const a=c[i];u=u.then((()=>Promise.all(a.map((i=>function(e,t,n,o,s,i){const a=r.getPath(e,t);if(a){const c=Array.isArray(a);return Promise.all(r.makeArray(a).filter(Boolean).map(((a,u)=>{const l=a.reference;if(l)return function(e,t,n,r){return t[e]||(t[e]=n.request({url:e,signal:r}).then((n=>(t[e]=n,n)),(n=>{throw delete t[e],n}))),Promise.resolve(t[e])}(l,o,s,i).then((o=>{n&&(c?t.indexOf("..")>-1?r.setPath(e,`${t.replace("..",`.${u}.`)}`,o):r.setPath(e,`${t}.${u}`,o):r.setPath(e,t,o))})).catch((e=>{if(404!==e.status)throw e}))})))}}(e,i,!!t.graph,n,o,s))))))})),u}t.default=class{constructor(e,t){this.units=r.units;const n="string"==typeof t?{serverUrl:t}:t;if(!n.serverUrl||!n.serverUrl.match(/https?:\/\/.+/))throw new Error('A "serverUrl" option is required and must begin with "http(s)"');this.state=n,this.environment=e,this._refreshTask=null;const o=this;this.patient={get id(){return o.getPatientId()},read:(e={})=>{const t=this.patient.id;return t?this.request(Object.assign(Object.assign({},e),{url:`Patient/${t}`})):Promise.reject(new Error("Patient is not available"))},request:(e,t={})=>this.patient.id?(async()=>{const n=await async function(e,t){const n=r.absolute("/",t.state.serverUrl);async function o(e){const n=e.pathname.split("/").pop();if(!n)throw new Error(`Invalid url "${e}"`);if(-1==s.patientCompartment.indexOf(n))throw new Error(`Cannot filter "${n}" resources by patient`);const o=await r.fetchConformanceStatement(t.state.serverUrl),i=r.getPatientParam(o,n);return e.searchParams.set(i,t.patient.id),e.href}return"string"==typeof e||e instanceof URL?{url:await o(new URL(e+"",n))}:(e.url=await o(new URL(e.url+"",n)),e)}(e,this);return this.request(n,t)})():Promise.reject(new Error("Patient is not available"))},this.encounter={get id(){return o.getEncounterId()},read:(e={})=>{const t=this.encounter.id;return t?this.request(Object.assign(Object.assign({},e),{url:`Encounter/${t}`})):Promise.reject(new Error("Encounter is not available"))}},this.user={get fhirUser(){return o.getFhirUser()},get id(){return o.getUserId()},get resourceType(){return o.getUserType()},read:(e={})=>{const t=this.user.fhirUser;return t?this.request(Object.assign(Object.assign({},e),{url:t})):Promise.reject(new Error("User is not available"))}},this.connect(e.fhir)}connect(e){if("function"==typeof e){const t={baseUrl:this.state.serverUrl.replace(/\/$/,"")},n=this.getState("tokenResponse.access_token");if(n)t.auth={token:n};else{const{username:e,password:n}=this.state;e&&n&&(t.auth={user:e,pass:n})}this.api=e(t);const r=this.getState("tokenResponse.patient");r&&(this.patient.api=e(Object.assign(Object.assign({},t),{patient:r})))}return this}getPatientId(){const e=this.state.tokenResponse;return e?e.patient?e.patient:((this.state.scope||"").match(/\blaunch(\/patient)?\b/)?a("The ID of the selected patient is not available. Please check if your server supports that."):a(o.default.noScopeForId,"patient","patient"),null):(this.state.authorizeUri?a(o.default.noIfNoAuth,"the ID of the selected patient"):a(o.default.noFreeContext,"selected patient"),null)}getEncounterId(){const e=this.state.tokenResponse;return e?e.encounter?e.encounter:((this.state.scope||"").match(/\blaunch(\/encounter)?\b/)?a("The ID of the selected encounter is not available. Please check if your server supports that, and that the selected patient has any recorded encounters."):a(o.default.noScopeForId,"encounter","encounter"),null):(this.state.authorizeUri?a(o.default.noIfNoAuth,"the ID of the selected encounter"):a(o.default.noFreeContext,"selected encounter"),null)}getIdToken(){const e=this.state.tokenResponse;if(e){const t=e.id_token,n=this.state.scope||"";if(!t){const e=n.match(/\bopenid\b/),t=n.match(/\bprofile\b/),r=n.match(/\bfhirUser\b/);return a(e&&(r||t)?"The id_token is not available. Please check if your server supports that.":"You are trying to get the id_token but you are not using the right scopes. Please add 'openid' and 'fhirUser' or 'profile' to the scopes you are requesting."),null}return r.jwtDecode(t,this.environment)}return this.state.authorizeUri?a(o.default.noIfNoAuth,"the id_token"):a(o.default.noFreeContext,"id_token"),null}getFhirUser(){const e=this.getIdToken();return e?e.profile:null}getUserId(){const e=this.getFhirUser();return e?e.split("/")[1]:null}getUserType(){const e=this.getFhirUser();return e?e.split("/")[0]:null}getAuthorizationHeader(){const e=this.getState("tokenResponse.access_token");if(e)return"Bearer "+e;const{username:t,password:n}=this.state;return t&&n?"Basic "+this.environment.btoa(t+":"+n):null}async _clearState(){const e=this.environment.getStorage(),t=await e.get(s.SMART_KEY);t&&await e.unset(t),await e.unset(s.SMART_KEY),this.state.tokenResponse={}}create(e,t={}){return this.request(Object.assign(Object.assign({},t),{url:`${e.resourceType}`,method:"POST",body:JSON.stringify(e),headers:Object.assign({"Content-Type":"application/json"},t.headers)}))}update(e,t={}){return this.request(Object.assign(Object.assign({},t),{url:`${e.resourceType}/${e.id}`,method:"PUT",body:JSON.stringify(e),headers:Object.assign({"Content-Type":"application/json"},t.headers)}))}delete(e,t={}){return this.request(Object.assign(Object.assign({},t),{url:e,method:"DELETE"}))}async request(e,t={},n={}){var s;const a=r.debug.extend("client:request");if(!e)throw new Error("request requires an url or request options as argument");let u;"string"==typeof e||e instanceof URL?(u=String(e),e={}):u=String(e.url),u=r.absolute(u,this.state.serverUrl);const l={graph:!1!==t.graph,flat:!!t.flat,pageLimit:null!==(s=t.pageLimit)&&void 0!==s?s:1,resolveReferences:t.resolveReferences||[],useRefreshToken:!1!==t.useRefreshToken,onPage:"function"==typeof t.onPage?t.onPage:void 0},f=e.signal||void 0;return(l.useRefreshToken?this.refreshIfNeeded({signal:f}).then((()=>e)):Promise.resolve(e)).then((e=>{const t=this.getAuthorizationHeader();return t&&(e.headers=Object.assign(Object.assign({},e.headers),{Authorization:t})),e})).then((e=>(a("%s, options: %O, fhirOptions: %O",u,e,l),r.request(u,e)))).catch((async e=>{if(401==e.status){if(!this.getState("tokenResponse.access_token"))throw new Error("This app cannot be accessed directly. Please launch it as SMART app!");if(!l.useRefreshToken)throw a("Your session has expired and the useRefreshToken option is set to false. Please re-launch the app."),await this._clearState(),new Error(o.default.expired);throw a("Auto-refresh failed! Please re-launch the app."),await this._clearState(),new Error(o.default.expired)}throw e})).catch((e=>{throw 403==e.status&&a("Permission denied! Please make sure that you have requested the proper scopes."),e})).then((e=>e?"string"==typeof e||e instanceof i?e:(async e=>("Bundle"==e.resourceType?await Promise.all((e.entry||[]).map((e=>c(e.resource,l,n,this,f)))):await c(e,l,n,this,f),e))(e).then((async e=>{if(e&&"Bundle"==e.resourceType){const t=e.link||[];if(l.flat&&(e=(e.entry||[]).map((e=>e.resource))),l.onPage&&await l.onPage(e,Object.assign({},n)),--l.pageLimit){const o=t.find((e=>"next"==e.relation));if(e=r.makeArray(e),o&&o.url){const t=await this.request({url:o.url,signal:f},l,n);return l.onPage?null:l.resolveReferences.length?(Object.assign(n,t.references),e.concat(r.makeArray(t.data||t))):e.concat(r.makeArray(t))}}}return e})).then((e=>{if(l.graph)n={};else if(!l.onPage&&l.resolveReferences.length)return{data:e,references:n};return e})):e))}refreshIfNeeded(e={}){const t=this.getState("tokenResponse.access_token"),n=this.getState("tokenResponse.refresh_token"),r=this.state.expiresAt||0;return t&&n&&r-10<Date.now()/1e3?this.refresh(e):Promise.resolve(this.state)}refresh(e={}){var t,n;const o=r.debug.extend("client:refresh");o("Attempting to refresh with refresh_token...");const s=null===(n=null===(t=this.state)||void 0===t?void 0:t.tokenResponse)||void 0===n?void 0:n.refresh_token;if(!s)throw new Error("Unable to refresh. No refresh_token found.");const i=this.state.tokenUri;if(!i)throw new Error("Unable to refresh. No tokenUri found.");const a=this.getState("tokenResponse.scope")||"",c=a.search(/\boffline_access\b/)>-1,u=a.search(/\bonline_access\b/)>-1;if(!c&&!u)throw new Error("Unable to refresh. No offline_access or online_access scope found.");if(!this._refreshTask){const t=Object.assign(Object.assign({credentials:this.environment.options.refreshTokenWithCredentials||"same-origin"},e),{method:"POST",mode:"cors",headers:Object.assign(Object.assign({},e.headers||{}),{"content-type":"application/x-www-form-urlencoded"}),body:`grant_type=refresh_token&refresh_token=${encodeURIComponent(s)}`});if(!("authorization"in t.headers)){const{clientSecret:e,clientId:n}=this.state;e&&(t.headers.authorization="Basic "+this.environment.btoa(n+":"+e))}this._refreshTask=r.request(i,t).then((e=>{if(!e.access_token)throw new Error("No access token received");return o("Received new access token response %O",e),Object.assign(this.state.tokenResponse,e),this.state.expiresAt=r.getAccessTokenExpiration(e,this.environment),this.state})).catch((e=>{var t,n;throw(null===(n=null===(t=this.state)||void 0===t?void 0:t.tokenResponse)||void 0===n?void 0:n.refresh_token)&&(o("Deleting the expired or invalid refresh token."),delete this.state.tokenResponse.refresh_token),e})).finally((()=>{this._refreshTask=null;const e=this.state.key;e?this.environment.getStorage().set(e,this.state):o("No 'key' found in Clint.state. Cannot persist the instance.")}))}return this._refreshTask}byCode(e,t){return r.byCode(e,t)}byCodes(e,t){return r.byCodes(e,t)}getPath(e,t=""){return r.getPath(e,t)}getState(e=""){return r.getPath(Object.assign({},this.state),e)}getFhirVersion(){return r.fetchConformanceStatement(this.state.serverUrl).then((e=>e.fhirVersion))}getFhirRelease(){return this.getFhirVersion().then((e=>{var t;return null!==(t=s.fhirVersions[e])&&void 0!==t?t:0}))}}},6057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e="Unknown error",t=0,n="Error",r=null){super(e),this.message=e,this.name="HttpError",this.statusCode=t,this.status=t,this.statusText=n,this.body=r}toJSON(){return{name:this.name,statusCode:this.statusCode,status:this.status,statusText:this.statusText,message:this.message,body:this.body}}}t.default=n},3338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6671),o=n(5014),s=n(5596);t.default=class{constructor(e={}){this._url=null,this._storage=null,this.options=Object.assign({replaceBrowserHistory:!0,fullSessionStorageSupport:!0,refreshTokenWithCredentials:"same-origin"},e)}relative(e){return new URL(e,this.getUrl().href).href}get fhir(){return"function"==typeof fhir?fhir:null}getUrl(){return this._url||(this._url=new URL(location+"")),this._url}redirect(e){location.href=e}getStorage(){return this._storage||(this._storage=new s.default),this._storage}getAbortController(){return AbortController}atob(e){return window.atob(e)}btoa(e){return window.btoa(e)}getSmartApi(){return{ready:(...e)=>r.ready(this,...e),authorize:e=>r.authorize(this,e),init:e=>r.init(this,e),client:e=>new o.default(this,e),options:this.options}}}},5832:(e,t,n)=>{"use strict";const r=new(n(3338).default),{ready:o,authorize:s,init:i,client:a,options:c}=r.getSmartApi();if("undefined"==typeof FHIRCLIENT_PURE){const e=n(4098);n(6486),window.fetch||(window.fetch=e.default,window.Headers=e.Headers,window.Request=e.Request,window.Response=e.Response)}const u={AbortController:window.AbortController,client:a,oauth2:{settings:c,ready:o,authorize:s,init:i}};e.exports=u},2681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetWindow=t.getPatientParam=t.byCodes=t.byCode=t.getAccessTokenExpiration=t.jwtDecode=t.randomString=t.absolute=t.makeArray=t.setPath=t.getPath=t.humanizeError=t.fetchConformanceStatement=t.getAndCache=t.request=t.responseToJSON=t.checkResponse=t.units=t.debug=void 0;const r=n(6057),o=n(9912),s=n(1227),{fetch:i}="undefined"!=typeof FHIRCLIENT_PURE?window:n(4098),a=s("FHIR");t.debug=a;const c={};function u({value:e,code:t}){if("number"!=typeof e)throw new Error("Found a non-numerical unit: "+e+" "+t)}async function l(e){if(!e.ok)throw await d(e);return e}function f(e){return e.text().then((e=>e.length?JSON.parse(e):""))}function p(e,t={}){return i(e,Object.assign(Object.assign({mode:"cors"},t),{headers:Object.assign({accept:"application/json"},t.headers)})).then(l).then((e=>{const t=e.headers.get("Content-Type")+"";return t.match(/\bjson\b/i)?f(e).then((t=>({res:e,body:t}))):t.match(/^text\//i)?e.text().then((t=>({res:e,body:t}))):{res:e}})).then((({res:e,body:n})=>{if(!n&&201==e.status){const n=e.headers.get("location")+"";if(n)return p(n,Object.assign(Object.assign({},t),{method:"GET",body:null}))}return void 0===n?e:n}))}function h(e,t,n=!1){return n||!c[e]?(c[e]=p(e,t),c[e]):Promise.resolve(c[e])}async function d(e){let t=`${e.status} ${e.statusText}\nURL: ${e.url}`,n=null;try{const r=e.headers.get("Content-Type")||"text/plain";r.match(/\bjson\b/i)?(n=await e.json(),n.error?(t+="\n"+n.error,n.error_description&&(t+=": "+n.error_description)):t+="\n\n"+JSON.stringify(n,null,4)):r.match(/^text\//i)&&(n=await e.text(),n&&(t+="\n\n"+n))}catch(e){}throw new r.default(t,e.status,e.statusText,n)}function g(e,t=""){if(!(t=t.trim()))return e;let n=t.split("."),r=e;for(;r&&n.length;){const e=n.shift();if(!e&&Array.isArray(r))return r.map((e=>g(e,n.join("."))));r=r[e]}return r}function y(e){return Array.isArray(e)?e:[e]}function m(e,t){const n=e.split(".")[1];return n?JSON.parse(t.atob(n)):null}function b(e,t){const n={};function r(e,t){e&&Array.isArray(e.coding)&&e.coding.forEach((({code:e})=>{e&&(n[e]=n[e]||[],n[e].push(t))}))}return y(e).forEach((e=>{"Observation"===e.resourceType&&e[t]&&(Array.isArray(e[t])?e[t].forEach((t=>r(t,e))):r(e[t],e))})),n}t.units={cm({code:e,value:t}){if(u({code:e,value:t}),"cm"==e)return t;if("m"==e)return 100*t;if("in"==e)return 2.54*t;if("[in_us]"==e)return 2.54*t;if("[in_i]"==e)return 2.54*t;if("ft"==e)return 30.48*t;if("[ft_us]"==e)return 30.48*t;throw new Error("Unrecognized length unit: "+e)},kg({code:e,value:t}){if(u({code:e,value:t}),"kg"==e)return t;if("g"==e)return t/1e3;if(e.match(/lb/))return t/2.20462;if(e.match(/oz/))return t/35.274;throw new Error("Unrecognized weight unit: "+e)},any:e=>(u(e),e.value)},t.checkResponse=l,t.responseToJSON=f,t.request=p,t.getAndCache=h,t.fetchConformanceStatement=function(e="/",t){const n=String(e).replace(/\/*$/,"/")+"metadata";return h(n,t).catch((e=>{throw new Error(`Failed to fetch the conformance statement from "${n}". ${e}`)}))},t.humanizeError=d,t.getPath=g,t.setPath=function(e,t,n,r=!1){return t.trim().split(".").reduce(((e,t,o,s)=>{if(!e||o!==s.length-1)return e&&void 0===e[t]&&r&&(e[t]=s[o+1].match(/^[0-9]+$/)?[]:{}),e?e[t]:void 0;e[t]=n}),e),e},t.makeArray=y,t.absolute=function(e,t){return e.match(/^http/)||e.match(/^urn/)?e:String(t||"").replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")},t.randomString=function(e=8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){const n=[],r=t.length;for(;e--;)n.push(t.charAt(Math.floor(Math.random()*r)));return n.join("")},t.jwtDecode=m,t.getAccessTokenExpiration=function(e,t){const n=Math.floor(Date.now()/1e3);if(e.expires_in)return n+e.expires_in;if(e.access_token){let n=m(e.access_token,t);if(n&&n.exp)return n.exp}return n+300},t.byCode=b,t.byCodes=function(e,t){const n=b(e,t);return(...e)=>e.filter((e=>e+""in n)).reduce(((e,t)=>e.concat(n[t+""])),[])},t.getPatientParam=function(e,t){const n=(g(e,"rest.0.resource")||[]).find((e=>e.type===t));if(!n)throw new Error(`Resource "${t}" is not supported by this FHIR server`);if(!Array.isArray(n.searchParam))throw new Error(`No search parameters supported for "${t}" on this FHIR server`);if("Patient"==t&&n.searchParam.find((e=>"_id"==e.name)))return"_id";const r=o.patientParams.find((e=>n.searchParam.find((t=>t.name==e))));if(!r)throw new Error("I don't know what param to use for "+t);return r},t.getTargetWindow=async function(e,t=800,n=720){if("function"==typeof e&&(e=await e()),e&&"object"==typeof e)return e;if("string"!=typeof e)return a("Invalid target type '%s'. Failing back to '_self'.",typeof e),self;if("_self"==e)return self;if("_parent"==e)return parent;if("_top"==e)return top;if("_blank"==e){let e,t=null;try{if(t=window.open("","SMARTAuthPopup"),!t)throw new Error("Perhaps window.open was blocked")}catch(t){e=t}return t||(a("Cannot open window. Failing back to '_self'. %s",e),self)}if("popup"==e){let e,r=null;try{if(r=window.open("","SMARTAuthPopup",["height="+n,"width="+t,"menubar=0","resizable=1","status=0","top="+(screen.height-n)/2,"left="+(screen.width-t)/2].join(",")),!r)throw new Error("Perhaps the popup window was blocked")}catch(t){e=t}return r||(a("Cannot open window. Failing back to '_self'. %s",e),self)}return frames[e]||(a("Unknown target '%s'. Failing back to '_self'.",e),self)}},9912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMART_KEY=t.patientParams=t.fhirVersions=t.patientCompartment=void 0,t.patientCompartment=["Account","AdverseEvent","AllergyIntolerance","Appointment","AppointmentResponse","AuditEvent","Basic","BodySite","BodyStructure","CarePlan","CareTeam","ChargeItem","Claim","ClaimResponse","ClinicalImpression","Communication","CommunicationRequest","Composition","Condition","Consent","Coverage","CoverageEligibilityRequest","CoverageEligibilityResponse","DetectedIssue","DeviceRequest","DeviceUseRequest","DeviceUseStatement","DiagnosticOrder","DiagnosticReport","DocumentManifest","DocumentReference","EligibilityRequest","Encounter","EnrollmentRequest","EpisodeOfCare","ExplanationOfBenefit","FamilyMemberHistory","Flag","Goal","Group","ImagingManifest","ImagingObjectSelection","ImagingStudy","Immunization","ImmunizationEvaluation","ImmunizationRecommendation","Invoice","List","MeasureReport","Media","MedicationAdministration","MedicationDispense","MedicationOrder","MedicationRequest","MedicationStatement","MolecularSequence","NutritionOrder","Observation","Order","Patient","Person","Procedure","ProcedureRequest","Provenance","QuestionnaireResponse","ReferralRequest","RelatedPerson","RequestGroup","ResearchSubject","RiskAssessment","Schedule","ServiceRequest","Specimen","SupplyDelivery","SupplyRequest","VisionPrescription"],t.fhirVersions={"0.4.0":2,"0.5.0":2,"1.0.0":2,"1.0.1":2,"1.0.2":2,"1.1.0":3,"1.4.0":3,"1.6.0":3,"1.8.0":3,"3.0.0":3,"3.0.1":3,"3.3.0":4,"3.5.0":4,"4.0.0":4,"4.0.1":4},t.patientParams=["patient","subject","requester","member","actor","beneficiary"],t.SMART_KEY="SMART_KEY"},6671:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.ready=t.buildTokenRequest=t.completeAuth=t.onMessage=t.isInPopUp=t.isInFrame=t.authorize=t.getSecurityExtensions=t.fetchWellKnownJson=t.KEY=void 0;const r=n(2681),o=n(5014),s=n(9912);Object.defineProperty(t,"KEY",{enumerable:!0,get:function(){return s.SMART_KEY}});const i=r.debug.extend("oauth2");function a(){return"object"==typeof window}function c(e="/",t){const n=String(e).replace(/\/*$/,"/")+".well-known/smart-configuration";return r.getAndCache(n,t).catch((e=>{throw new Error(`Failed to fetch the well-known json "${n}". ${e.message}`)}))}function u(e="/",t){return c(e,t).then((e=>{if(!e.authorization_endpoint||!e.token_endpoint)throw new Error("Invalid wellKnownJson");return{registrationUri:e.registration_endpoint||"",authorizeUri:e.authorization_endpoint,tokenUri:e.token_endpoint}}))}function l(e="/",t){return r.fetchConformanceStatement(e,t).then((e=>{const t=(r.getPath(e||{},"rest.0.security.extension")||[]).filter((e=>"http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris"===e.url)).map((e=>e.extension))[0],n={registrationUri:"",authorizeUri:"",tokenUri:""};return t&&t.forEach((e=>{"register"===e.url&&(n.registrationUri=e.valueUri),"authorize"===e.url&&(n.authorizeUri=e.valueUri),"token"===e.url&&(n.tokenUri=e.valueUri)})),n}))}function f(e,t="/"){const n=e.getAbortController(),r=new n,o=new n;return function(e){const t=e.length,n=[];let r=!1;return new Promise(((o,s)=>{function i(e){n.push(e)===t&&s(new Error(n.map((e=>e.message)).join("; ")))}e.forEach((t=>{t.promise.then((n=>function(t,n){t.complete=!0,r||(r=!0,e.forEach((e=>{e.complete||e.controller.abort()})),o(n))}(t,n)),i)}))}))}([{controller:r,promise:u(t,{signal:r.signal})},{controller:o,promise:l(t,{signal:o.signal})}])}async function p(e,t={},n=!1){const{redirect_uri:o,clientSecret:c,fakeTokenResponse:u,patientId:l,encounterId:p,client_id:y,target:m,width:b,height:w}=t;let{iss:v,launch:C,fhirServiceUrl:$,redirectUri:x,scope:E="",clientId:_,completeInTarget:S}=t;const O=e.getUrl(),k=e.getStorage();v=O.searchParams.get("iss")||v,$=O.searchParams.get("fhirServiceUrl")||$,C=O.searchParams.get("launch")||C,_||(_=y),x||(x=o),x?x.match(/^https?\:\/\//)||(x=e.relative(x)):x=e.relative(".");const P=String(v||$||"");if(!P)throw new Error("No server url found. It must be specified as `iss` or as `fhirServiceUrl` parameter");if(v&&i("Making %s launch...",C?"EHR":"standalone"),C&&!E.match(/launch/)&&(E+=" launch"),a()){const e=h(),t=d();(e||t)&&!0!==S&&!1!==S&&(S=e,console.warn('Your app is being authorized from within an iframe or popup window. Please be explicit and provide a "completeInTarget" option. Use "true" to complete the authorization in the same window, or "false" to try to complete it in the parent or the opener window. See http://docs.smarthealthit.org/client-js/api.html'))}const R=await k.get(s.SMART_KEY);await k.unset(R);const j=r.randomString(16),A={clientId:_,scope:E,redirectUri:x,serverUrl:P,clientSecret:c,tokenResponse:{},key:j,completeInTarget:S};(!a()||r.getPath(e,"options.fullSessionStorageSupport"))&&await k.set(s.SMART_KEY,j),u&&Object.assign(A.tokenResponse,u),l&&Object.assign(A.tokenResponse,{patient:l}),p&&Object.assign(A.tokenResponse,{encounter:p});let T=x+"?state="+encodeURIComponent(j);if($&&!v)return i("Making fake launch..."),await k.set(j,A),n?T:await e.redirect(T);const F=await f(e,P);if(Object.assign(A,F),await k.set(j,A),!A.authorizeUri)return n?T:await e.redirect(T);const U=["response_type=code","client_id="+encodeURIComponent(_||""),"scope="+encodeURIComponent(E),"redirect_uri="+encodeURIComponent(x),"aud="+encodeURIComponent(P),"state="+encodeURIComponent(j)];if(C&&U.push("launch="+encodeURIComponent(C)),T=A.authorizeUri+"?"+U.join("&"),n)return T;if(!m||!a())return await e.redirect(T);{let e;if(e=await r.getTargetWindow(m,b,w),e!==self)try{e.sessionStorage.removeItem(R),e.sessionStorage.setItem(j,JSON.stringify(A))}catch(t){r.debug('Failed to modify window.sessionStorage. Perhaps it is from different origin?. Failing back to "_self". %s',t),e=self}if(e!==self)try{e.location.href=T,self.addEventListener("message",g)}catch(e){r.debug('Failed to modify window.location. Perhaps it is from different origin?. Failing back to "_self". %s',e),self.location.href=T}else self.location.href=T}}function h(){try{return self!==top&&parent!==self}catch(e){return!0}}function d(){try{return self===top&&!!opener&&opener!==self&&!!window.name}catch(e){return!1}}function g(e){"completeAuth"==e.data.type&&e.origin===new URL(self.location.href).origin&&(window.removeEventListener("message",g),window.location.href=e.data.url)}async function y(e){var t,n;const c=e.getUrl(),u=e.getStorage(),l=c.searchParams;let f=l.get("state");const p=l.get("code"),g=l.get("error"),y=l.get("error_description");if(f||(f=await u.get(s.SMART_KEY)),g||y)throw new Error([g,y].filter(Boolean).join(": "));if(i("key: %s, code: %s",f,p),!f)throw new Error("No 'state' parameter found. Please (re)launch the app.");let b=await u.get(f);const w=!a()||r.getPath(e,"options.fullSessionStorageSupport");if(a()&&b&&!b.completeInTarget){const e=h(),t=d();if((e||t)&&!c.searchParams.get("complete")){c.searchParams.set("complete","1");const{href:n,origin:r}=c;return e&&parent.postMessage({type:"completeAuth",url:n},r),t&&(opener.postMessage({type:"completeAuth",url:n},r),window.close()),new Promise((()=>{}))}}c.searchParams.delete("complete");const v=l.has("state");if(a()&&r.getPath(e,"options.replaceBrowserHistory")&&(p||v)&&(p&&(l.delete("code"),i("Removed code parameter from the url.")),v&&w&&(l.delete("state"),i("Removed state parameter from the url.")),window.history.replaceState&&window.history.replaceState({},"",c.href)),!b)throw new Error("No state found! Please (re)launch the app.");if(p&&!(null===(t=b.tokenResponse)||void 0===t?void 0:t.access_token)&&b.tokenUri){if(!p)throw new Error("'code' url parameter is required");i("Preparing to exchange the code for access token...");const t=m(e,p,b);i("Token request options: %O",t);const n=await r.request(b.tokenUri,t);if(i("Token response: %O",n),!n.access_token)throw new Error("Failed to obtain access token.");b.expiresAt=r.getAccessTokenExpiration(n,e),b=Object.assign(Object.assign({},b),{tokenResponse:n}),await u.set(f,b),i("Authorization successful!")}else i((null===(n=b.tokenResponse)||void 0===n?void 0:n.access_token)?"Already authorized":"No authorization needed");w&&await u.set(s.SMART_KEY,f);const C=new o.default(e,b);return i("Created client instance: %O",C),C}function m(e,t,n){const{redirectUri:r,clientSecret:o,tokenUri:s,clientId:a}=n;if(!r)throw new Error("Missing state.redirectUri");if(!s)throw new Error("Missing state.tokenUri");if(!a)throw new Error("Missing state.clientId");const c={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:`code=${t}&grant_type=authorization_code&redirect_uri=${encodeURIComponent(r)}`};return o?(c.headers.Authorization="Basic "+e.btoa(a+":"+o),i("Using state.clientSecret to construct the authorization header: %s",c.headers.Authorization)):(i("No clientSecret found in state. Adding the clientId to the POST body"),c.body+=`&client_id=${encodeURIComponent(a)}`),c}t.fetchWellKnownJson=c,t.getSecurityExtensions=f,t.authorize=p,t.isInFrame=h,t.isInPopUp=d,t.onMessage=g,t.completeAuth=y,t.buildTokenRequest=m,t.ready=async function(e,t,n){let r=y(e);return t&&(r=r.then(t)),n&&(r=r.catch(n)),r},t.init=async function(e,t){const n=e.getUrl(),r=n.searchParams.get("code"),i=n.searchParams.get("state");if(r&&i)return y(e);const a=e.getStorage(),c=i||await a.get(s.SMART_KEY),u=await a.get(c);return u?new o.default(e,u):p(e,t).then((()=>new Promise((()=>{}))))}},5596:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{async get(e){const t=sessionStorage[e];return t?JSON.parse(t):null}async set(e,t){return sessionStorage[e]=JSON.stringify(t),t}async unset(e){return e in sessionStorage&&(delete sessionStorage[e],!0)}}},2067:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={expired:"Session expired! Please re-launch the app",noScopeForId:"Trying to get the ID of the selected %s. Please add 'launch' or 'launch/%s' to the requested scopes and try again.",noIfNoAuth:"You are trying to get %s but the app is not authorized yet.",noFreeContext:"Please don't use open fhir servers if you need to access launch context items like the %S."}}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(r)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e){return 0===Object.keys(e).length}function u(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(e,t,n){e.$$.on_destroy.push(u(t,n))}function f(e,t,n,r){if(e){const o=p(e,t,n,r);return e[0](o)}}function p(e,n,r,o){return e[1]&&o?t(r.ctx.slice(),e[1](o(n))):r.ctx}function h(e,t,n,r,o,s,i){const a=function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(t,r,o,s);if(a){const o=p(t,n,r,i);e.p(o,a)}}function d(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e,t){const n={};t=new Set(t);for(const r in e)t.has(r)||"$"===r[0]||(n[r]=e[r]);return n}function y(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function b(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function v(){return w(" ")}function C(){return w("")}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:$(e,r,t[r])}let E;function _(e){E=e}function S(){if(!E)throw new Error("Function called outside component initialization");return E}function O(e){S().$$.on_mount.push(e)}function k(e,t){S().$$.context.set(e,t)}function P(e){return S().$$.context.get(e)}new Set,new Set;const R=[],j=[],A=[],T=[],F=Promise.resolve();let U=!1;function I(e){A.push(e)}let M=!1;const L=new Set;function D(){if(!M){M=!0;do{for(let e=0;e<R.length;e+=1){const t=R[e];_(t),q(t.$$)}for(_(null),R.length=0;j.length;)j.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];L.has(t)||(L.add(t),t())}A.length=0}while(R.length);for(;T.length;)T.pop()();U=!1,M=!1,L.clear()}}function q(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}const N=new Set;let B,z;function H(){B={r:0,c:[],p:B}}function Y(){B.r||s(B.c),B=B.p}function J(e,t){e&&e.i&&(N.delete(e),e.i(t))}function K(e,t,n,r){if(e&&e.o){if(N.has(e))return;N.add(e),B.c.push((()=>{N.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function G(e,t){const n={},r={},o={$$scope:1};let s=e.length;for(;s--;){const i=e[s],a=t[s];if(a){for(const e in i)e in a||(r[e]=1);for(const e in a)o[e]||(n[e]=a[e],o[e]=1);e[s]=a}else for(const e in i)o[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function V(e){return"object"==typeof e&&null!==e?e:{}}function W(e){e&&e.c()}function Q(e,t,n){const{fragment:o,on_mount:a,on_destroy:c,after_update:u}=e.$$;o&&o.m(t,n),I((()=>{const t=a.map(r).filter(i);c?c.push(...t):s(t),e.$$.on_mount=[]})),u.forEach(I)}function X(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,n,r,i,a,c,u=[-1]){const l=E;_(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:o(),dirty:u,skip_bound:!1};let p=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),p&&function(e,t){-1===e.$$.dirty[0]&&(R.push(e),U||(U=!0,F.then(D)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),p=!0,s(f.before_update),f.fragment=!!i&&i(f.ctx),n.target){if(n.hydrate){const e=(h=n.target,Array.from(h.childNodes));f.fragment&&f.fragment.l(e),e.forEach(m)}else f.fragment&&f.fragment.c();n.intro&&J(t.$$.fragment),Q(t,n.target,n.anchor),D()}var h;_(l)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(z=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!c(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class ee{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!c(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const te=[];function ne(t,n=e){let r;const o=[];function s(e){if(a(t,e)&&(t=e,r)){const e=!te.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),te.push(n,t)}if(e){for(let e=0;e<te.length;e+=2)te[e][0](te[e+1]);te.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,a=e){const c=[i,a];return o.push(c),1===o.length&&(r=n(s)||e),i(t),()=>{const e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}const re={},oe={};function se(e){return{...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}}const ie=function(e,t){const n=[];let r=se(e);return{get location(){return r},listen(t){n.push(t);const o=()=>{r=se(e),t({location:r,action:"POP"})};return e.addEventListener("popstate",o),()=>{e.removeEventListener("popstate",o);const r=n.indexOf(t);n.splice(r,1)}},navigate(t,{state:o,replace:s=!1}={}){o={...o,key:Date.now()+""};try{s?e.history.replaceState(o,null,t):e.history.pushState(o,null,t)}catch(n){e.location[s?"replace":"assign"](t)}r=se(e),n.forEach((e=>e({location:r,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(e="/"){let t=0;const n=[{pathname:e,search:""}],r=[];return{get location(){return n[t]},addEventListener(e,t){},removeEventListener(e,t){},history:{get entries(){return n},get index(){return t},get state(){return r[t]},pushState(e,o,s){const[i,a=""]=s.split("?");t++,n.push({pathname:i,search:a}),r.push(e)},replaceState(e,o,s){const[i,a=""]=s.split("?");n[t]={pathname:i,search:a},r[t]=e}}}}()),{navigate:ae}=ie,ce=/^:(.+)/;function ue(e,t){return e.substr(0,t.length)===t}function le(e){return"*"===e[0]}function fe(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function pe(e){return e.replace(/(^\/+|\/+$)/g,"")}function he(e,t){return{route:e,score:e.default?0:fe(e.path).reduce(((e,t)=>(e+=4,function(e){return""===e}(t)?e+=1:function(e){return ce.test(e)}(t)?e+=2:le(t)?e-=5:e+=3,e)),0),index:t}}function de(e,t){let n,r;const[o]=t.split("?"),s=fe(o),i=""===s[0],a=function(e){return e.map(he).sort(((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index))}(e);for(let e=0,o=a.length;e<o;e++){const o=a[e].route;let c=!1;if(o.default){r={route:o,params:{},uri:t};continue}const u=fe(o.path),l={},f=Math.max(s.length,u.length);let p=0;for(;p<f;p++){const e=u[p],t=s[p];if(void 0!==e&&le(e)){l["*"===e?"*":e.slice(1)]=s.slice(p).map(decodeURIComponent).join("/");break}if(void 0===t){c=!0;break}let n=ce.exec(e);if(n&&!i){const e=decodeURIComponent(t);l[n[1]]=e}else if(e!==t){c=!0;break}}if(!c){n={route:o,params:l,uri:"/"+s.slice(0,p).join("/")};break}}return n||r||null}function ge(e,t){return e+(t?`?${t}`:"")}function ye(e,t){return`${pe("/"===t?e:`${pe(e)}/${pe(t)}`)}/`}function me(e){let t;const n=e[9].default,r=f(n,e,e[8],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,[t]){r&&r.p&&256&t&&h(r,n,e,e[8],t,null,null)},i(e){t||(J(r,e),t=!0)},o(e){K(r,e),t=!1},d(e){r&&r.d(e)}}}function be(t,n,r){let o,a,c,{$$slots:f={},$$scope:p}=n,{basepath:h="/"}=n,{url:d=null}=n;const g=P(re),y=P(oe),m=ne([]);l(t,m,(e=>r(7,c=e)));const b=ne(null);let w=!1;const v=g||ne(d?{pathname:d}:ie.location);l(t,v,(e=>r(6,a=e)));const C=y?y.routerBase:ne({path:h,uri:h});l(t,C,(e=>r(5,o=e)));const $=function(t,n,r){const o=!Array.isArray(t),a=o?[t]:t,c=n.length<2;return{subscribe:ne(r,(t=>{let r=!1;const l=[];let f=0,p=e;const h=()=>{if(f)return;p();const r=n(o?l[0]:l,t);c?t(r):p=i(r)?r:e},d=a.map(((e,t)=>u(e,(e=>{l[t]=e,f&=~(1<<t),r&&h()}),(()=>{f|=1<<t}))));return r=!0,h(),function(){s(d),p()}})).subscribe}}([C,b],(([e,t])=>{if(null===t)return e;const{path:n}=e,{route:r,uri:o}=t;return{path:r.default?n:r.path.replace(/\*.*$/,""),uri:o}}));return g||(O((()=>ie.listen((e=>{v.set(e.location)})))),k(re,v)),k(oe,{activeRoute:b,base:C,routerBase:$,registerRoute:function(e){const{path:t}=o;let{path:n}=e;if(e._path=n,e.path=ye(t,n),"undefined"==typeof window){if(w)return;const t=function(e,t){return de([e],t)}(e,a.pathname);t&&(b.set(t),w=!0)}else m.update((t=>(t.push(e),t)))},unregisterRoute:function(e){m.update((t=>{const n=t.indexOf(e);return t.splice(n,1),t}))}}),t.$$set=e=>{"basepath"in e&&r(3,h=e.basepath),"url"in e&&r(4,d=e.url),"$$scope"in e&&r(8,p=e.$$scope)},t.$$.update=()=>{if(32&t.$$.dirty){const{path:e}=o;m.update((t=>(t.forEach((t=>t.path=ye(e,t._path))),t)))}if(192&t.$$.dirty){const e=de(c,a.pathname);b.set(e)}},[m,v,C,h,d,o,a,c,p,f]}const we=class extends ee{constructor(e){super(),Z(this,e,be,me,a,{basepath:3,url:4})}},ve=e=>({params:4&e,location:16&e}),Ce=e=>({params:e[2],location:e[4]});function $e(e){let t,n,r,o;const s=[Ee,xe],i=[];function a(e,t){return null!==e[0]?0:1}return t=a(e),n=i[t]=s[t](e),{c(){n.c(),r=C()},m(e,n){i[t].m(e,n),y(e,r,n),o=!0},p(e,o){let c=t;t=a(e),t===c?i[t].p(e,o):(H(),K(i[c],1,1,(()=>{i[c]=null})),Y(),n=i[t],n?n.p(e,o):(n=i[t]=s[t](e),n.c()),J(n,1),n.m(r.parentNode,r))},i(e){o||(J(n),o=!0)},o(e){K(n),o=!1},d(e){i[t].d(e),e&&m(r)}}}function xe(e){let t;const n=e[10].default,r=f(n,e,e[9],Ce);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){r&&r.p&&532&t&&h(r,n,e,e[9],t,ve,Ce)},i(e){t||(J(r,e),t=!0)},o(e){K(r,e),t=!1},d(e){r&&r.d(e)}}}function Ee(e){let n,r,o;const s=[{location:e[4]},e[2],e[3]];var i=e[0];function a(e){let n={};for(let e=0;e<s.length;e+=1)n=t(n,s[e]);return{props:n}}return i&&(n=new i(a())),{c(){n&&W(n.$$.fragment),r=C()},m(e,t){n&&Q(n,e,t),y(e,r,t),o=!0},p(e,t){const o=28&t?G(s,[16&t&&{location:e[4]},4&t&&V(e[2]),8&t&&V(e[3])]):{};if(i!==(i=e[0])){if(n){H();const e=n;K(e.$$.fragment,1,0,(()=>{X(e,1)})),Y()}i?(n=new i(a()),W(n.$$.fragment),J(n.$$.fragment,1),Q(n,r.parentNode,r)):n=null}else i&&n.$set(o)},i(e){o||(n&&J(n.$$.fragment,e),o=!0)},o(e){n&&K(n.$$.fragment,e),o=!1},d(e){e&&m(r),n&&X(n,e)}}}function _e(e){let t,n,r=null!==e[1]&&e[1].route===e[7]&&$e(e);return{c(){r&&r.c(),t=C()},m(e,o){r&&r.m(e,o),y(e,t,o),n=!0},p(e,[n]){null!==e[1]&&e[1].route===e[7]?r?(r.p(e,n),2&n&&J(r,1)):(r=$e(e),r.c(),J(r,1),r.m(t.parentNode,t)):r&&(H(),K(r,1,1,(()=>{r=null})),Y())},i(e){n||(J(r),n=!0)},o(e){K(r),n=!1},d(e){r&&r.d(e),e&&m(t)}}}function Se(e,n,r){let o,s,{$$slots:i={},$$scope:a}=n,{path:c=""}=n,{component:u=null}=n;const{registerRoute:f,unregisterRoute:p,activeRoute:h}=P(oe);l(e,h,(e=>r(1,o=e)));const g=P(re);l(e,g,(e=>r(4,s=e)));const y={path:c,default:""===c};let m={},b={};var w;return f(y),"undefined"!=typeof window&&(w=()=>{p(y)},S().$$.on_destroy.push(w)),e.$$set=e=>{r(13,n=t(t({},n),d(e))),"path"in e&&r(8,c=e.path),"component"in e&&r(0,u=e.component),"$$scope"in e&&r(9,a=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&o&&o.route===y&&r(2,m=o.params);{const{path:e,component:t,...o}=n;r(3,b=o)}},n=d(n),[u,o,m,b,s,h,g,y,c,a,i]}const Oe=class extends ee{constructor(e){super(),Z(this,e,Se,_e,a,{path:8,component:0})}};function ke(e){let n,r,o,s;const i=e[16].default,a=f(i,e,e[15],null);let c=[{href:e[0]},{"aria-current":e[2]},e[1],e[6]],u={};for(let e=0;e<c.length;e+=1)u=t(u,c[e]);return{c(){n=b("a"),a&&a.c(),x(n,u)},m(t,i){var c,u,l,f;y(t,n,i),a&&a.m(n,null),r=!0,o||(c=n,u="click",l=e[5],c.addEventListener(u,l,f),s=()=>c.removeEventListener(u,l,f),o=!0)},p(e,[t]){a&&a.p&&32768&t&&h(a,i,e,e[15],t,null,null),x(n,u=G(c,[(!r||1&t)&&{href:e[0]},(!r||4&t)&&{"aria-current":e[2]},2&t&&e[1],64&t&&e[6]]))},i(e){r||(J(a,e),r=!0)},o(e){K(a,e),r=!1},d(e){e&&m(n),a&&a.d(e),o=!1,s()}}}function Pe(e,n,r){let o;const s=["to","replace","state","getProps"];let i,a,c=g(n,s),{$$slots:u={},$$scope:f}=n,{to:p="#"}=n,{replace:h=!1}=n,{state:y={}}=n,{getProps:m=(()=>({}))}=n;const{base:b}=P(oe);l(e,b,(e=>r(13,i=e)));const w=P(re);l(e,w,(e=>r(14,a=e)));const v=function(){const e=S();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,o)}))}}}();let C,$,x,E;return e.$$set=e=>{n=t(t({},n),d(e)),r(6,c=g(n,s)),"to"in e&&r(7,p=e.to),"replace"in e&&r(8,h=e.replace),"state"in e&&r(9,y=e.state),"getProps"in e&&r(10,m=e.getProps),"$$scope"in e&&r(15,f=e.$$scope)},e.$$.update=()=>{8320&e.$$.dirty&&r(0,C="/"===p?i.uri:function(e,t){if(ue(e,"/"))return e;const[n,r]=e.split("?"),[o]=t.split("?"),s=fe(n),i=fe(o);if(""===s[0])return ge(o,r);if(!ue(s[0],"."))return ge(("/"===o?"":"/")+i.concat(s).join("/"),r);const a=i.concat(s),c=[];return a.forEach((e=>{".."===e?c.pop():"."!==e&&c.push(e)})),ge("/"+c.join("/"),r)}(p,i.uri)),16385&e.$$.dirty&&r(11,$=ue(a.pathname,C)),16385&e.$$.dirty&&r(12,x=C===a.pathname),4096&e.$$.dirty&&r(2,o=x?"page":void 0),23553&e.$$.dirty&&r(1,E=m({location:a,href:C,isPartiallyCurrent:$,isCurrent:x}))},[C,E,o,b,w,function(e){if(v("click",e),function(e){return!e.defaultPrevented&&0===e.button&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)){e.preventDefault();const t=a.pathname===C||h;ae(C,{state:y,replace:t})}},c,p,h,y,m,$,x,i,a,f,u]}const Re=class extends ee{constructor(e){super(),Z(this,e,Pe,ke,a,{to:7,replace:8,state:9,getProps:10})}};var je=n(5832);function Ae(e){return O((async()=>{je.oauth2.authorize({clientId:"dips-ehr-notes",scope:"launch launch/patient patient/*.write patient/read offline_access openid fhirUser",redirectUri:"./app",iss:"https://launch.smarthealthit.org/v/r3/sim/eyJoIjoiMSIsImIiOiJmMDQ2MjkzNi1lYjRiLTRkYTEtYjQ1YS1mYmQ5NmViZjhjY2IiLCJlIjoic21hcnQtUHJhY3RpdGlvbmVyLTcxNjE0NTAyIn0/fhir"})})),[]}const Te=class extends ee{constructor(e){super(),Z(this,e,Ae,null,a,{})}};function Fe(t){let n;return{c(){n=b("h1"),n.textContent="Home"},m(e,t){y(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}const Ue=class extends ee{constructor(e){super(),Z(this,e,null,Fe,a,{})}};function Ie(e){let t;return{c(){t=w("Home")},m(e,n){y(e,t,n)},d(e){e&&m(t)}}}function Me(e){let t;return{c(){t=w("App")},m(e,n){y(e,t,n)},d(e){e&&m(t)}}}function Le(e){let t,n,r,o,s,i,a,c,u;return n=new Re({props:{to:"/",$$slots:{default:[Ie]},$$scope:{ctx:e}}}),o=new Re({props:{to:"app",$$slots:{default:[Me]},$$scope:{ctx:e}}}),i=new Oe({props:{path:"/",component:Te}}),c=new Oe({props:{path:"app",component:Ue}}),{c(){t=b("nav"),W(n.$$.fragment),r=v(),W(o.$$.fragment),s=v(),W(i.$$.fragment),a=v(),W(c.$$.fragment)},m(e,l){y(e,t,l),Q(n,t,null),function(e,t){e.appendChild(t)}(t,r),Q(o,t,null),y(e,s,l),Q(i,e,l),y(e,a,l),Q(c,e,l),u=!0},p(e,t){const r={};2&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const s={};2&t&&(s.$$scope={dirty:t,ctx:e}),o.$set(s)},i(e){u||(J(n.$$.fragment,e),J(o.$$.fragment,e),J(i.$$.fragment,e),J(c.$$.fragment,e),u=!0)},o(e){K(n.$$.fragment,e),K(o.$$.fragment,e),K(i.$$.fragment,e),K(c.$$.fragment,e),u=!1},d(e){e&&m(t),X(n),X(o),e&&m(s),X(i,e),e&&m(a),X(c,e)}}}function De(e){let t,n;return t=new we({props:{url:e[0],$$slots:{default:[Le]},$$scope:{ctx:e}}}),{c(){W(t.$$.fragment)},m(e,r){Q(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.url=e[0]),2&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(J(t.$$.fragment,e),n=!0)},o(e){K(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function qe(e,t,n){let{url:r=""}=t;return e.$$set=e=>{"url"in e&&n(0,r=e.url)},[r]}new class extends ee{constructor(e){super(),Z(this,e,qe,De,a,{url:0})}}({target:document.body})})()})();